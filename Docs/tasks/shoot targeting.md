#core
2022-08-06
## Описание задачи
На текущий момент уже существует возможность стрельбы и передвижения, однако стрельба на телефоне во многом неудобна. 

В основном концепте задумано автонаведение на цель, поскольку введение при управлении на телефоне второго джостика и перенесение ответственности за прицеливание на игрока представляется неудобным и мало применимым методом.

## Минимальное выполнение
Есть потенциальная возможность на примитивном уровне решить данную задачу. Ввести выбор приоритетной цели в зависимости от направления движения. Если сейчас просто выбирается ближайший противник, то модифицировать этот метод, выбирая среди всех ближайшего, но с учетом направления. 
Допустим, мы пропускаем тех противников, которые попадают в сектор обзора персонажа около 60 градусов. 

Однако такой подход технически сложно реализуем — нужно определить и настроить слишком много переменных: расстояние, на котором ближайший противник строго приоритетен, независимо от сектора; угол сектора; расстояние таргета.

При этом даже при грамотной настройке это может не дать положительного результата, особенно, если учесть, что в основном при маневрировании перед противником мы хотим стрелять в него но двигаться *перпендикулярно* направлению к противнику, что делает данную реализацию почти бесполезной.

## Правильное выполнение
Так или иначе, чтобы не происходило таргетов персонажа на ненужных противников, будь те за стенами и тому подобное, нужно определять расстояние до противника не длинной прямой линией до него, а длиной ломаной пути. 
Таким образом, для данной задачи необходимо введение поиска пути (нужно будет найти способ сделать это оптимизированно).

Поиск пути, аналогично и для [[enemies movement|движения противников]] необходимо реализовать посредством NavMesh, и возможно определение расстояния до игрока перенести на самих противников.

> Реализация данной, пусть и сложной, задачи необходима для создания предсказуемого определения целей и кофмортного геймплея, поскольку ошибки в выборе цели персонажем лишь раздражают игрока, не предоставляя честного челенджа.

